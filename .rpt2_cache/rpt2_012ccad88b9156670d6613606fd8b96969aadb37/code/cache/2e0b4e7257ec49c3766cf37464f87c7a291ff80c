{
  "code": "import Player from \"../character/Player\";\r\nimport BattleScene from \"../scene/BattleScene\";\r\nexport default class SkillLearningImage extends Laya.Image {\r\n    constructor(player) {\r\n        super();\r\n        SkillLearningImage.player = player;\r\n        this.skin = (\"comp/dialogue-bubble.png\");\r\n        this.width = 400;\r\n        this.height = 200;\r\n        this.sizeGrid = \"20,20,20,20\";\r\n        this.centerX = 0;\r\n        this.centerY = 0;\r\n        this.zOrder = 1003;\r\n        SkillLearningImage.curebtn = new Laya.Button(\"comp/cure.png\", \"回复所有体力\");\r\n        SkillLearningImage.speedbtn = new Laya.Button(\"comp/cure.png\", \"强化速度\\vLv.\" + (SkillLearningImage.speedlvl + 1));\r\n        SkillLearningImage.weaponbtn = new Laya.Button(\"comp/cure.png\", \"强化武器\\vLv.\" + (SkillLearningImage.weaponlvl + 1));\r\n        SkillLearningImage.lifebtn = new Laya.Button(\"comp/cure.png\", \"强化生命容量\\vLv.\" + (SkillLearningImage.lifelvl + 1));\r\n        SkillLearningImage.weaponspeedbtn = new Laya.Button(\"comp/cure.png\", \"强化攻击频率\\vLv.\" + (SkillLearningImage.weaponspeed + 1));\r\n        SkillLearningImage.damagebtn = new Laya.Button(\"comp/cure.png\", \"强化伤害\\vLv.\" + (SkillLearningImage.damagelvl + 1));\r\n        SkillLearningImage.curebtn.stateNum = 1;\r\n        SkillLearningImage.speedbtn.stateNum = 1;\r\n        SkillLearningImage.weaponbtn.stateNum = 1;\r\n        SkillLearningImage.lifebtn.stateNum = 1;\r\n        SkillLearningImage.weaponspeedbtn.stateNum = 1;\r\n        SkillLearningImage.damagebtn.stateNum = 1;\r\n        SkillLearningImage.curebtn.y = 40;\r\n        SkillLearningImage.speedbtn.y = 40;\r\n        SkillLearningImage.weaponbtn.y = 40;\r\n        SkillLearningImage.lifebtn.y = 40;\r\n        SkillLearningImage.weaponspeedbtn.y = 40;\r\n        SkillLearningImage.damagebtn.y = 40;\r\n        this.addChild(SkillLearningImage.curebtn);\r\n        this.addChild(SkillLearningImage.speedbtn);\r\n        this.addChild(SkillLearningImage.weaponbtn);\r\n        this.addChild(SkillLearningImage.lifebtn);\r\n        this.addChild(SkillLearningImage.weaponspeedbtn);\r\n        this.addChild(SkillLearningImage.damagebtn);\r\n    }\r\n    static initBtns() {\r\n        let ups = [];\r\n        while (ups.length < 3) {\r\n            let rnd = Math.floor(Math.random() * 6);\r\n            if (ups.includes(rnd)) {\r\n                continue;\r\n            }\r\n            if (rnd == 2 && this.weaponlvl >= 3) {\r\n                continue;\r\n            }\r\n            if (rnd == 3 && this.lifelvl >= 3) {\r\n                continue;\r\n            }\r\n            ups.push(rnd);\r\n        }\r\n        SkillLearningImage.curebtn.visible = false;\r\n        SkillLearningImage.speedbtn.visible = false;\r\n        SkillLearningImage.weaponbtn.visible = false;\r\n        SkillLearningImage.lifebtn.visible = false;\r\n        SkillLearningImage.weaponspeedbtn.visible = false;\r\n        SkillLearningImage.damagebtn.visible = false;\r\n        SkillLearningImage.curebtn.on(Laya.Event.CLICK, SkillLearningImage, SkillLearningImage.onCure);\r\n        SkillLearningImage.speedbtn.on(Laya.Event.CLICK, SkillLearningImage, SkillLearningImage.onSpeed);\r\n        SkillLearningImage.weaponbtn.on(Laya.Event.CLICK, SkillLearningImage, SkillLearningImage.onWeapon);\r\n        SkillLearningImage.lifebtn.on(Laya.Event.CLICK, SkillLearningImage, SkillLearningImage.onLife);\r\n        SkillLearningImage.weaponspeedbtn.on(Laya.Event.CLICK, SkillLearningImage, SkillLearningImage.onWeaponspeed);\r\n        SkillLearningImage.damagebtn.on(Laya.Event.CLICK, SkillLearningImage, SkillLearningImage.onDamage);\r\n        for (let i = 0; i < 3; i++) {\r\n            let index = ups[i];\r\n            if (index == 0) {\r\n                SkillLearningImage.curebtn.x = 120 * i + 10 * (i + 1);\r\n                SkillLearningImage.curebtn.visible = true;\r\n                SkillLearningImage.curebtn.label = \"回复所有体力\";\r\n            }\r\n            else if (index == 1) {\r\n                SkillLearningImage.speedbtn.x = 120 * i + 10 * (i + 1);\r\n                SkillLearningImage.speedbtn.visible = true;\r\n                SkillLearningImage.speedbtn.label = \"强化速度\\vLv.\" + (SkillLearningImage.speedlvl + 1);\r\n            }\r\n            else if (index == 2) {\r\n                SkillLearningImage.weaponbtn.x = 120 * i + 10 * (i + 1);\r\n                SkillLearningImage.weaponbtn.visible = true;\r\n                SkillLearningImage.weaponbtn.label = \"强化武器\\vLv.\" + (SkillLearningImage.weaponlvl + 1);\r\n            }\r\n            else if (index == 3) {\r\n                SkillLearningImage.lifebtn.x = 120 * i + 10 * (i + 1);\r\n                SkillLearningImage.lifebtn.visible = true;\r\n                SkillLearningImage.lifebtn.label = \"强化生命容量\\vLv.\" + (SkillLearningImage.lifelvl + 1);\r\n            }\r\n            else if (index == 4) {\r\n                SkillLearningImage.weaponspeedbtn.x = 120 * i + 10 * (i + 1);\r\n                SkillLearningImage.weaponspeedbtn.visible = true;\r\n                SkillLearningImage.weaponspeedbtn.label = \"强化攻击频率\\vLv.\" + (SkillLearningImage.weaponspeed + 1);\r\n            }\r\n            else if (index == 5) {\r\n                SkillLearningImage.damagebtn.x = 120 * i + 10 * (i + 1);\r\n                SkillLearningImage.damagebtn.visible = true;\r\n                SkillLearningImage.damagebtn.label = \"强化伤害\\vLv.\" + (SkillLearningImage.damagelvl + 1);\r\n            }\r\n        }\r\n    }\r\n    static onCure() {\r\n        this.player.hp = this.player.maxHP;\r\n        this.curetime++;\r\n        this.onButton();\r\n    }\r\n    static onSpeed() {\r\n        this.player.speed++;\r\n        this.speedlvl++;\r\n        this.onButton();\r\n    }\r\n    static onWeapon() {\r\n        this.onButton();\r\n    }\r\n    static onLife() {\r\n        this.player.maxHP++;\r\n        this.lifelvl++;\r\n        this.onButton();\r\n    }\r\n    static onWeaponspeed() {\r\n        this.player.attackInterval = Math.floor(this.player.attackInterval * 0.8);\r\n        this.weaponlvl++;\r\n        this.onButton();\r\n    }\r\n    static onDamage() {\r\n        Player.attackdamage += 0.5;\r\n        this.damagelvl++;\r\n        this.onButton();\r\n    }\r\n    static onButton() {\r\n        Player.Level++;\r\n        Player.exp -= Player.maxExp;\r\n        Player.maxExp = Math.floor(Player.maxExp * 1.3);\r\n        BattleScene.Lv.text = \"lv.\" + Player.Level + \" exp/next:\" + Player.exp + \"/\" + Player.maxExp;\r\n        BattleScene.lvup_button.visible = false;\r\n        BattleScene.SkillImage.visible = false;\r\n    }\r\n}\r\nSkillLearningImage.curetime = 0;\r\nSkillLearningImage.speedlvl = 0;\r\nSkillLearningImage.weaponlvl = 0;\r\nSkillLearningImage.lifelvl = 0;\r\nSkillLearningImage.weaponspeed = 0;\r\nSkillLearningImage.damagelvl = 0;\r\n",
  "references": [
    "/Users/huanggaole/PCGZelda/src/character/Player.ts",
    "/Users/huanggaole/PCGZelda/src/map/BattleImage.ts",
    "/Users/huanggaole/PCGZelda/src/scene/BattleScene.ts"
  ]
}
