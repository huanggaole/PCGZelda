{
  "code": "import Player from \"../character/Player\";\r\nimport BulletFactory from \"../map/BulletFactory\";\r\nimport Character from \"../character/Character\";\r\nexport class IceArrow extends Laya.Script {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.damage = 1;\r\n    }\r\n    onUpdate() {\r\n        let owner = this.owner;\r\n        if (owner.x < 0 || owner.y < 0 || owner.x > 960 || owner.y > 480) {\r\n            this.removeOwner(owner);\r\n        }\r\n    }\r\n    onTriggerEnter(other) {\r\n        if (this.owner && other.owner) {\r\n            let bullet = other.owner.getComponent(IceArrow);\r\n            if (bullet) {\r\n                return;\r\n            }\r\n            let player = other.owner.getComponent(Player);\r\n            if (player) {\r\n                if (player && !player.invincibleStatus) {\r\n                    player.hurtFrame = 20;\r\n                    player.HP -= this.damage;\r\n                    Laya.SoundManager.playSound(\"sound/12.ogg\");\r\n                }\r\n                let owner = this.owner;\r\n                this.removeOwner(owner);\r\n            }\r\n            else {\r\n                let character = other.owner.getComponent(Character);\r\n                if (character) {\r\n                }\r\n                else {\r\n                    let owner = this.owner;\r\n                    this.removeOwner(owner);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    removeOwner(owner) {\r\n        let rg = owner.getComponent(Laya.RigidBody);\r\n        let bc = owner.getComponent(Laya.BoxCollider);\r\n        if (rg) {\r\n            rg.enabled = false;\r\n        }\r\n        if (bc) {\r\n            bc.enabled = false;\r\n        }\r\n        if (bc) {\r\n            owner._destroyComponent(bc);\r\n        }\r\n        if (rg) {\r\n            owner._destroyComponent(rg);\r\n        }\r\n        owner._destroyAllComponent();\r\n        BulletFactory.mainsp.removeChild(owner);\r\n        Laya.Pool.recover('BulletType', owner);\r\n    }\r\n}\r\nIceArrow.skin = \"Bullet/Ice.png\";\r\nIceArrow.scale = 2;\r\nIceArrow.width = 5;\r\nIceArrow.height = 5;\r\nIceArrow.speed = 5;\r\n",
  "references": [
    "/Users/huanggaole/PCGZelda/src/character/Player.ts",
    "/Users/huanggaole/PCGZelda/src/map/BulletFactory.ts",
    "/Users/huanggaole/PCGZelda/src/character/Character.ts"
  ]
}
