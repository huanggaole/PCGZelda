{
  "code": "export var CharacterAction;\r\n(function (CharacterAction) {\r\n    CharacterAction[CharacterAction[\"None\"] = 0] = \"None\";\r\n    CharacterAction[CharacterAction[\"RandomWalk\"] = 1] = \"RandomWalk\";\r\n    CharacterAction[CharacterAction[\"Attack\"] = 2] = \"Attack\";\r\n})(CharacterAction || (CharacterAction = {}));\r\nexport default class Character extends Laya.Script {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.action = CharacterAction.None;\r\n    }\r\n    setDirection(_x, _y) {\r\n        this.x = _x;\r\n        this.y = _y;\r\n    }\r\n    onStart() {\r\n        this.x = 0;\r\n        this.y = 0;\r\n        this.speed = 3.0;\r\n        this.frame = 0;\r\n        this.stepindex = 0;\r\n        this.directindex = 0;\r\n        this.rigidbody = this.owner.getComponent(Laya.RigidBody);\r\n    }\r\n    doMove() {\r\n        this.rigidbody.setVelocity({ x: this.x * this.speed, y: this.y * this.speed });\r\n        if (this.x == 0 && this.y == 0) {\r\n            return;\r\n        }\r\n        this.frame++;\r\n        if (this.frame * this.speed >= 50) {\r\n            this.frame = 0;\r\n            this.stepindex++;\r\n            if (this.stepindex >= 4) {\r\n                this.stepindex = 0;\r\n            }\r\n        }\r\n        if (Math.abs(this.x) > Math.abs(this.y)) {\r\n            if (this.x > 0) {\r\n                this.directindex = 3;\r\n            }\r\n            else {\r\n                this.directindex = 2;\r\n            }\r\n        }\r\n        else {\r\n            if (this.y > 0) {\r\n                this.directindex = 0;\r\n            }\r\n            else {\r\n                this.directindex = 1;\r\n            }\r\n        }\r\n        this.owner.value = Character.Values[this.stepindex][this.directindex];\r\n    }\r\n    onStopMove() {\r\n        this.x = 0;\r\n        this.y = 0;\r\n    }\r\n    onSetRandomWalk() {\r\n        this.x = 0.5 - Math.random();\r\n        this.y = 0.5 - Math.random();\r\n        let mod = Math.sqrt(this.x * this.x + this.y * this.y);\r\n        if (mod != 0) {\r\n            this.x /= mod;\r\n            this.y /= mod;\r\n        }\r\n    }\r\n}\r\nCharacter.Values = [[\"一\", \"八\", \"匕\", \"厂\"], [\"刀\", \"儿\", \"二\", \"几\"], [\"力\", \"人\", \"入\", \"十\"], [\"又\", \"川\", \"寸\", \"大\"], [\"飞\", \"干\", \"工\", \"弓\"], [\"广\", \"己\", \"口\", \"马\"], [\"门\", \"女\", \"山\", \"尸\"]];\r\n",
  "references": []
}
